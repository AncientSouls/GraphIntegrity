{"version":3,"sources":["../src/lib/spread.js"],"names":["factorySpreadGraph","ParentClassGraph","SpreadGraph","args","constantField","variableField","_constantField","_variableField","prevSpreadLink","pathGraph","pathLink","newSpreadLink","context","callback","spreadLink","modifier","process","selector","add"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;AASA,SAASA,kBAAT,CAA4BC,gBAA5B,EAA8C;AAAA,MACtCC,WADsC;AAAA;;AAG1C;;;;;AAKA,yBAAYC,IAAZ,EAAkBC,aAAlB,EAAiCC,aAAjC,EAAgD;AAAA;;AAAA;;AAAA,0KACrCF,IADqC;;AAE9C,YAAKG,cAAL,GAAsBF,aAAtB;AACA,YAAKG,cAAL,GAAsBF,aAAtB;AAH8C;AAI/C;;AAED;;;;;;;;;;;;AAd0C;AAAA;AAAA,wCAwBxBG,cAxBwB,EAwBRC,SAxBQ,EAwBGC,QAxBH,EAwBaC,aAxBb,EAwB4BC,OAxB5B,EAwBqCC,QAxBrC,EAwB+C;AACvFA,iBAASF,aAAT;AACD;;AAED;;;;;;;AAOA;;;;;;;;;AAnC0C;AAAA;AAAA,0CA2CtBG,UA3CsB,EA2CVF,OA3CU,EA2CDC,QA3CC,EA2CS;AACjDA,iBAAS,IAAT;AACD;;AAED;;;;;;;AAOA;;;;AAtD0C;AAAA;AAAA,6BAyDnCE,QAzDmC,EAyDzBF,QAzDyB,EAyDfD,OAzDe,EAyDN;AAClC,YAAIA,WAAWA,QAAQI,OAAvB,EAAgC;AAC9BD,mBAASC,OAAT,GAAmB,CAACJ,QAAQI,OAAT,CAAnB;AACD;AACD,gIAAoBD,QAApB,EAA8BF,QAA9B,EAAwCD,OAAxC;AACD;;AAED;;;;;AAhE0C;AAAA;AAAA,6BAoEnCK,QApEmC,EAoEzBJ,QApEyB,EAoEfD,OApEe,EAoEN;AAClC,YAAIA,WAAWA,QAAQI,OAAvB,EAAgC;AAC9B,cAAI,CAACJ,QAAQG,QAAb,EAAuBH,QAAQG,QAAR,GAAmB,EAAnB;AACvBH,kBAAQG,QAAR,CAAiBC,OAAjB,GAA2B,EAAEE,KAAKN,QAAQI,OAAf,EAA3B;AACD;AACD,gIAAoBC,QAApB,EAA8BJ,QAA9B,EAAwCD,OAAxC;AACD;AA1EyC;;AAAA;AAAA,IAClBX,gBADkB;;AA6E5C,SAAOC,WAAP;AACD;;QAEQF,kB,GAAAA,kB","file":"spread.js","sourcesContent":["/**\n * This method allows you to use SpreadGraph class to its inheritance chain.\n * Fields launched, process, prev, path and root is required!\n * Manage fields launched and process.\n * \n * @param {Class} ParentClassGraph\n * @return {Class} SpreadGraph\n * @description `import { factorySpreadGraph } from 'ancient-graph-spreading';`\n */\nfunction factorySpreadGraph(ParentClassGraph) {\n  class SpreadGraph extends ParentClassGraph {\n    \n    /**\n     * @param {Array} args - parent class graph arguments\n     * @param {string} constantField\n     * @param {string} variableField\n     */\n    constructor(args, constantField, variableField) {\n      super(...args);\n      this._constantField = constantField;\n      this._variableField = variableField;\n    }\n    \n    /**\n     * Default spreading handler. If spread specified link allowed, callback it link, else callback undefined.\n     * \n     * @param {Object} [prevSpreadLink]\n     * @param {PathGraph} [pathGraph]\n     * @param {Object} [pathLink]\n     * @param {Object} newSpreadLink \n     * @param {Object} [context]\n     * @param {SpreadGraph~_spreadingHandlerCallback} [callback]\n     */\n    _spreadingHandler(prevSpreadLink, pathGraph, pathLink, newSpreadLink, context, callback) {\n      callback(newSpreadLink);\n    }\n    \n    /**\n     * Responce from _spreadingHandler method.\n     *\n     * @callback SpreadGraph~_spreadingHandlerCallback\n     * @param {Object} [newSpreadLink] \n     */\n    \n    /**\n     * Default unspreading handler. If unspread specified link allowed, callback it link, else callback undefined.\n     * It called in cases of dispute. When respread, if this method not replaced, will be respreaded all spread links.\n     * \n     * @param {Object} spreadLink \n     * @param {Object} [context]\n     * @param {SpreadGraph~_unspreadingHandlerCallback} [callback]\n     */\n    _unspreadingHandler(spreadLink, context, callback) {\n      callback(true);\n    }\n    \n    /**\n     * Responce from _unspreadingHandler method.\n     *\n     * @callback SpreadGraph~_unspreadingHandlerCallback\n     * @param {Boolean} [premission = true]\n     */\n    \n    /**\n     * Parent insert with parser of context.process.\n     */\n    insert(modifier, callback, context) {\n      if (context && context.process) {\n        modifier.process = [context.process];\n      }\n      return super.insert(modifier, callback, context);\n    }\n    \n    /**\n     * The method is strictly designed so that the class inherits from ExistedGraph.\n     * Adds to launched field unspread value.\n     */\n    remove(selector, callback, context) {\n      if (context && context.process) {\n        if (!context.modifier) context.modifier = {};\n        context.modifier.process = { add: context.process };\n      }\n      return super.remove(selector, callback, context);\n    }\n  }\n  \n  return SpreadGraph;\n};\n\nexport { factorySpreadGraph };"]}